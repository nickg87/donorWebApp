transactions = [
  {
    "blockNumber": "6296362",
    "timeStamp": "1720788384",
    "hash": "0xc601820f6ecad913e1a62c2a0c0382561eb2acaa2ef3987cffd443e18ac2b044",
    "nonce": "5",
    "blockHash": "0xb0a2642dd9831cbf259194584f2c3abd92684398eaefbb29f7970bd40b135ebc",
    "transactionIndex": "18",
    "from": "0x9eca171ea62b7ac92e4258f71f195042b3e2ece6",
    "to": "0x092aa7b28ee01f85ffc0b3ae941fe1926f8fa3d3",
    "value": "1000000000000000",
    "gas": "21000",
    "gasPrice": "8686912064",
    "isError": "0",
    "txreceipt_status": "1",
    "input": "0x",
    "contractAddress": "",
    "cumulativeGasUsed": "1774842",
    "gasUsed": "21000",
    "confirmations": "387",
    "methodId": "0x",
    "functionName": ""
  },
  {
    "blockNumber": "6296355",
    "timeStamp": "1720788300",
    "hash": "0x0d5f27878a96fd6ec49958ab1901cb59e9f9f18474e81b274541ee5babab0517",
    "nonce": "4",
    "blockHash": "0x5da7b6be820e392a6727d8e3ee3d213214a2f3351da5f698c060837ecea57522",
    "transactionIndex": "24",
    "from": "0x9eca171ea62b7ac92e4258f71f195042b3e2ece6",
    "to": "0x092aa7b28ee01f85ffc0b3ae941fe1926f8fa3d3",
    "value": "1500000000000000",
    "gas": "21000",
    "gasPrice": "9291183439",
    "isError": "0",
    "txreceipt_status": "1",
    "input": "0x",
    "contractAddress": "",
    "cumulativeGasUsed": "2842567",
    "gasUsed": "21000",
    "confirmations": "394",
    "methodId": "0x",
    "functionName": ""
  },
  {
    "blockNumber": "6296253",
    "timeStamp": "1720786920",
    "hash": "0x092afb47c9d390acb870b7dee9ae6d29f1c9067a7b78064357a2c161ab6d82c9",
    "nonce": "3",
    "blockHash": "0x4876c5950b9ce80ee47a04dcdfbcdf4c4a814a9c82efa46c31d85861db2770e5",
    "transactionIndex": "29",
    "from": "0x9eca171ea62b7ac92e4258f71f195042b3e2ece6",
    "to": "0x092aa7b28ee01f85ffc0b3ae941fe1926f8fa3d3",
    "value": "1500000000000000",
    "gas": "21000",
    "gasPrice": "12189441714",
    "isError": "0",
    "txreceipt_status": "1",
    "input": "0x",
    "contractAddress": "",
    "cumulativeGasUsed": "5415356",
    "gasUsed": "21000",
    "confirmations": "496",
    "methodId": "0x",
    "functionName": ""
  },
  {
    "blockNumber": "6296240",
    "timeStamp": "1720786740",
    "hash": "0xf6ccadfe3ff628f80e1f5342fb468755b3c5e6578e2914adeb7ec016bed982bf",
    "nonce": "2",
    "blockHash": "0xb62f1cc17faabb44a678496a590b0972af49005ff15aa574f10a8840556a178e",
    "transactionIndex": "28",
    "from": "0x9eca171ea62b7ac92e4258f71f195042b3e2ece6",
    "to": "0x092aa7b28ee01f85ffc0b3ae941fe1926f8fa3d3",
    "value": "1000000000000000",
    "gas": "21000",
    "gasPrice": "12188289046",
    "isError": "0",
    "txreceipt_status": "1",
    "input": "0x",
    "contractAddress": "",
    "cumulativeGasUsed": "4555319",
    "gasUsed": "21000",
    "confirmations": "509",
    "methodId": "0x",
    "functionName": ""
  },
  {
    "blockNumber": "6295893",
    "timeStamp": "1720782192",
    "hash": "0x14d04e08230e196e3f3211d28587fc5aadafb737d10e784fe0d5120f174d14d1",
    "nonce": "1",
    "blockHash": "0xead6d4425e39d7f052852c6891883527ebf88fc7ac6bf8f00ad6e862a31cea09",
    "transactionIndex": "25",
    "from": "0x9eca171ea62b7ac92e4258f71f195042b3e2ece6",
    "to": "0x092aa7b28ee01f85ffc0b3ae941fe1926f8fa3d3",
    "value": "1000000000000000",
    "gas": "21000",
    "gasPrice": "9283853491",
    "isError": "0",
    "txreceipt_status": "1",
    "input": "0x",
    "contractAddress": "",
    "cumulativeGasUsed": "3122804",
    "gasUsed": "21000",
    "confirmations": "856",
    "methodId": "0x",
    "functionName": ""
  },
  {
    "blockNumber": "6295602",
    "timeStamp": "1720778340",
    "hash": "0xcca7c2687ff736b9a23234a6873ca49b08a562b54a8867ada2a280dd6cc1335f",
    "nonce": "2",
    "blockHash": "0x8f096db27c587f50b4f668d49574b0a3a9a059db8098f0e40dbcd2158da1d1f2",
    "transactionIndex": "64",
    "from": "0x9a92ac9d100fa398b61599565ad9eb3a936641b2",
    "to": "0x092aa7b28ee01f85ffc0b3ae941fe1926f8fa3d3",
    "value": "1000000000000000",
    "gas": "21000",
    "gasPrice": "8867456248",
    "isError": "0",
    "txreceipt_status": "1",
    "input": "0x",
    "contractAddress": "",
    "cumulativeGasUsed": "8071078",
    "gasUsed": "21000",
    "confirmations": "1147",
    "methodId": "0x",
    "functionName": ""
  },
  {
    "blockNumber": "6295589",
    "timeStamp": "1720778172",
    "hash": "0xc27e80237a391ade352ad6caffd6c9898d369321beaf647cbb4bbc2d0b6bc65d",
    "nonce": "0",
    "blockHash": "0xe18ac7da4d901963f00af2397677da8eb28871a04ed9e9248876d03176159d10",
    "transactionIndex": "41",
    "from": "0x9eca171ea62b7ac92e4258f71f195042b3e2ece6",
    "to": "0x092aa7b28ee01f85ffc0b3ae941fe1926f8fa3d3",
    "value": "1000000000000000",
    "gas": "21000",
    "gasPrice": "9345057837",
    "isError": "0",
    "txreceipt_status": "1",
    "input": "0x",
    "contractAddress": "",
    "cumulativeGasUsed": "5309604",
    "gasUsed": "21000",
    "confirmations": "1160",
    "methodId": "0x",
    "functionName": ""
  }
]

exports.seed = function(knex) {
  return knex.transaction(async function(trx) {
    try {
      // Seed pools table first
      await trx('pools').del(); // Clear existing data if any
      await trx('pools').insert([
        { title: 'Pool 1', description: 'Description for Pool 1', active: true, type: 'A' },
        { title: 'Pool 2', description: 'Description for Pool 2', active: true, type: 'B' },
        { title: 'Pool 3', description: 'Description for Pool 3', active: false, type: 'C' }
      ]);

      // Get pool IDs for reference in transactions seeding
      const pools = await trx('pools').select('id');

      // Seed transactions table with valid poolId references
      await trx('transactions').del(); // Clear existing data if any


      // Prepare data for insertion
      const donorData = transactions.map(transaction => ({
        blockHash: transaction.blockHash,
        blockNumber: parseInt(transaction.blockNumber), // Ensure numeric type
        from: transaction.from.toLowerCase(), // Normalize Ethereum addresses
        gas: parseInt(transaction.gas), // Ensure numeric type
        gasPrice: transaction.gasPrice,
        gasUsed: parseInt(transaction.gasUsed), // Ensure numeric type
        hash: transaction.hash,
        timeStamp: transaction.timeStamp, // Convert Unix timestamp to Date object
        to: transaction.to.toLowerCase(), // Normalize Ethereum addresses
        txreceipt_status: transaction.txreceipt_status, // Ensure numeric type
        value: transaction.value,
        createdAt: knex.fn.now(), // Use Knex function to get current timestamp
        poolId: 7, // Replace with the appropriate poolId or logic to determine poolId
        // Add more columns as needed
      }));

      //await trx('transactions').insert(donorData);

      await trx('transactions').insert([
        {
          blockHash: '0xe18ac7da4d901963f00af2397677da8eb28871a04ed9e9248876d03176159d10',
          blockNumber: 6295589, // Ensure numeric type
          from: '0x9eca171ea62b7ac92e4258f71f195042b3e2ece6', // Normalize Ethereum addresses
          gas: 21000, // Ensure numeric type
          gasPrice: '9345057837',
          gasUsed: 21000, // Ensure numeric type
          hash: '0xc27e80237a391ade352ad6caffd6c9898d369321beaf647cbb4bbc2d0b6bc65d',
          timeStamp: '1720778172', // Convert Unix timestamp to Date object
          to: '0x092aa7b28ee01f85ffc0b3ae941fe1926f8fa3d3', // Normalize Ethereum addresses
          txreceipt_status: 1, // Ensure numeric type
          value: '1000000000000000',
          //createdAt: knex.fn.now(), // Use Knex function to get current timestamp
          poolId: 7, // Replace with the appropriate poolId or logic to determine poolId
          // Add more columns as needed
        }
        ]);

      // Commit the transaction
      await trx.commit();
      console.log('Seeding completed successfully.');
    } catch (error) {
      // Rollback transaction if there's an error
      await trx.rollback();
      throw error;
    }
  });
};
